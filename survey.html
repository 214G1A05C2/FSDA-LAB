<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registration + Survey + Graph</title>

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }

    body {
        background: #e3e9f7;
        padding: 20px;
        display: flex;
        justify-content: center;
    }

    .container {
        width: 400px;
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        margin-bottom: 40px;
    }

    h2 { text-align: center; margin-bottom: 20px; }

    .input-group { margin-bottom: 15px; }
    .input-group label { font-weight: bold; }
    .input-group input {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: 1px solid #aaa;
        border-radius: 5px;
    }

    small { color: red; font-size: 12px; }

    button {
        width: 100%;
        padding: 12px;
        background: #4a73e8;
        color: #fff;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        margin-top: 10px;
    }
    button:hover { background: #325dde; }

    #successMsg { text-align: center; color: green; margin-top: 15px; }

    .bar-container { margin-top: 10px; }
    .label { font-weight: bold; }

    .bar {
        height: 25px;
        width: 0%;
        background: steelblue;
        border-radius: 5px;
        transition: width 0.4s;
    }
</style>
</head>
<body>

<div>
    <!-- REGISTRATION FORM -->
    <div class="container">
        <h2>Registration Form</h2>

        <form id="regForm">
            <div class="input-group">
                <label>Full Name</label>
                <input type="text" id="name" required>
            </div>

            <div class="input-group">
                <label>Email</label>
                <input type="email" id="email" required>
                <small id="emailError"></small>
            </div>

            <div class="input-group">
                <label>Password</label>
                <input type="password" id="password" required>
                <small id="passStrength"></small>
            </div>

            <div class="input-group">
                <label>Confirm Password</label>
                <input type="password" id="confirmPassword" required>
                <small id="passMatch"></small>
            </div>

            <button type="submit">Register</button>
        </form>

        <p id="successMsg"></p>
    </div>


    <!-- SURVEY + GRAPH -->
    <div class="container">
        <h2>Survey</h2>

        <p><b>Which feature do you like most?</b></p>

        <label><input type="radio" name="survey" value="Design"> Design</label><br>
        <label><input type="radio" name="survey" value="Usability"> Usability</label><br>
        <label><input type="radio" name="survey" value="Performance"> Performance</label><br>
        <label><input type="radio" name="survey" value="Security"> Security</label><br>

        <button onclick="submitVote()">Submit Vote</button>

        <h2>Survey Graph</h2>

        <div class="bar-container">
            <div class="label">Design (<span id="designCount">0</span>)</div>
            <div class="bar" id="designBar"></div>
        </div>

        <div class="bar-container">
            <div class="label">Usability (<span id="usabilityCount">0</span>)</div>
            <div class="bar" id="usabilityBar"></div>
        </div>

        <div class="bar-container">
            <div class="label">Performance (<span id="performanceCount">0</span>)</div>
            <div class="bar" id="performanceBar"></div>
        </div>

        <div class="bar-container">
            <div class="label">Security (<span id="securityCount">0</span>)</div>
            <div class="bar" id="securityBar"></div>
        </div>
    </div>
</div>

<script>
/* ------------------ REGISTRATION FORM VALIDATION ------------------ */

const email = document.getElementById("email");
const emailError = document.getElementById("emailError");

const password = document.getElementById("password");
const passStrength = document.getElementById("passStrength");

const confirmPassword = document.getElementById("confirmPassword");
const passMatch = document.getElementById("passMatch");

const successMsg = document.getElementById("successMsg");

// Email validation
email.addEventListener("input", () => {
    const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;

    if (!regex.test(email.value)) {
        emailError.textContent = "Invalid email format";
    } else {
        emailError.textContent = "";
    }
});

// Password strength
password.addEventListener("input", () => {
    const val = password.value;

    if (val.length < 6) {
        passStrength.textContent = "Weak (min 6 characters)";
        passStrength.style.color = "red";
    }
    else if (val.match(/[A-Z]/) && val.match(/[0-9]/) && val.match(/[@$!%*?&#]/)) {
        passStrength.textContent = "Strong password";
        passStrength.style.color = "green";
    }
    else {
        passStrength.textContent = "Medium strength";
        passStrength.style.color = "orange";
    }
});

// Password match
confirmPassword.addEventListener("input", () => {
    if (confirmPassword.value !== password.value) {
        passMatch.textContent = "Passwords do not match";
    } else {
        passMatch.textContent = "";
    }
});

// Submit form
document.getElementById("regForm").addEventListener("submit", (e) => {
    e.preventDefault();

    if (
        emailError.textContent === "" &&
        passStrength.style.color !== "red" &&
        passMatch.textContent === ""
    ) {
        successMsg.textContent = "Registration Successful!";
    } else {
        successMsg.textContent = "Please fix the errors.";
        successMsg.style.color = "red";
    }
});


/* ------------------ SURVEY + GRAPH ------------------ */

let counts = {
    Design: 0,
    Usability: 0,
    Performance: 0,
    Security: 0
};

function submitVote() {
    const choice = document.querySelector('input[name="survey"]:checked');
    if (!choice) {
        alert("Please choose an option!");
        return;
    }

    counts[choice.value]++;  
    updateGraph();
}

function updateGraph() {
    const total = counts.Design + counts.Usability + counts.Performance + counts.Security;
    if (total === 0) return;

    document.getElementById("designCount").textContent = counts.Design;
    document.getElementById("usabilityCount").textContent = counts.Usability;
    document.getElementById("performanceCount").textContent = counts.Performance;
    document.getElementById("securityCount").textContent = counts.Security;

    document.getElementById("designBar").style.width = (counts.Design / total * 100) + "%";
    document.getElementById("usabilityBar").style.width = (counts.Usability / total * 100) + "%";
    document.getElementById("performanceBar").style.width = (counts.Performance / total * 100) + "%";
    document.getElementById("securityBar").style.width = (counts.Security / total * 100) + "%";
}
</script>

</body>
</html>